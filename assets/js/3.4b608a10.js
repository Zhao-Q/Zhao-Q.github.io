(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{420:function(s,a,e){s.exports=e.p+"assets/img/1.1b4b2b23.png"},421:function(s,a,e){s.exports=e.p+"assets/img/2.f7de9de3.png"},422:function(s,a,e){s.exports=e.p+"assets/img/3.ab4bc94d.png"},423:function(s,a,e){s.exports=e.p+"assets/img/4.3451dcca.png"},424:function(s,a,e){s.exports=e.p+"assets/img/5.c38f9c3a.png"},425:function(s,a,e){s.exports=e.p+"assets/img/6.f7265ba6.png"},426:function(s,a,e){s.exports=e.p+"assets/img/7.b6a314cf.png"},427:function(s,a,e){s.exports=e.p+"assets/img/8.183fb7cd.png"},428:function(s,a,e){s.exports=e.p+"assets/img/9.ca2dee8f.png"},429:function(s,a,e){s.exports=e.p+"assets/img/10.d91a0844.png"},430:function(s,a,e){s.exports=e.p+"assets/img/11.e40eb3f9.png"},431:function(s,a,e){s.exports=e.p+"assets/img/12.5c23e1e9.png"},432:function(s,a,e){s.exports=e.p+"assets/img/13.35213123.png"},433:function(s,a,e){s.exports=e.p+"assets/img/14.82a6f009.png"},434:function(s,a,e){s.exports=e.p+"assets/img/15.be077a9d.png"},435:function(s,a,e){s.exports=e.p+"assets/img/16.a1485490.png"},436:function(s,a,e){s.exports=e.p+"assets/img/17.fba16cf5.png"},437:function(s,a,e){s.exports=e.p+"assets/img/18.e85016c4.png"},438:function(s,a,e){s.exports=e.p+"assets/img/19.eb9b5fed.png"},439:function(s,a,e){s.exports=e.p+"assets/img/20.6d6769f9.png"},440:function(s,a,e){s.exports=e.p+"assets/img/21.963def33.png"},441:function(s,a,e){s.exports=e.p+"assets/img/22.81874de5.png"},442:function(s,a,e){s.exports=e.p+"assets/img/23.a282070b.png"},443:function(s,a,e){s.exports=e.p+"assets/img/24.ec7639ea.png"},500:function(s,a,e){"use strict";e.r(a);var n=e(45),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"linux-常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux-常用命令"}},[s._v("#")]),s._v(" Linux 常用命令")]),s._v(" "),n("h2",{attrs:{id:"一、基本命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、基本命令"}},[s._v("#")]),s._v(" 一、基本命令")]),s._v(" "),n("p",[s._v("1.1 关机和重启")]),s._v(" "),n("p",[s._v("关机")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("shutdown -h now      立刻关机\n\nshutdown -h 5        5分钟后关机\n\npoweroff             立刻关机\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("重启")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("shutdown -r now      立刻重启\n\nshutdown -r 5        5分钟后重启\n\nreboot               立刻重启\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("1.2 帮助命令")]),s._v(" "),n("p",[s._v("--help 命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("shutdown --help：\n\nifconfig --help：查看网卡信息\n\nman 命令（命令说明书）\n\nman shutdown\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("注意：man shutdown 打开命令说明书之后，使用按键 q 退出")]),s._v(" "),n("h2",{attrs:{id:"二、目录操作命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、目录操作命令"}},[s._v("#")]),s._v(" 二、目录操作命令")]),s._v(" "),n("p",[s._v("2.1 目录切换 cd")]),s._v(" "),n("p",[s._v("命令：cd 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /      切换到根目录\n\ncd /usr   切换到根目录下的 usr 目录\n\ncd ../    切换到上一级目录 或者 cd ..\n\ncd ~      切换到 home 目录\n\ncd -      切换到上次访问的目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("2.2 目录查看 ls [-al]")]),s._v(" "),n("p",[s._v("命令：ls [-al]")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ls           查看当前目录下的所有目录和文件\n\nls -a        查看当前目录下的所有目录和文件（包括隐藏的文件）\n\nls -l 或 ll  列表查看当前目录下的所有目录和文件（列表查看，显示更多信息）\n\nls /dir      查看指定目录下的所有目录和文件 如：ls /usr\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("2.3 目录操作【增，删，改，查】")]),s._v(" "),n("p",[s._v("2.3.1 创建目录【增】 mkdir")]),s._v(" "),n("p",[s._v("命令：mkdir 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir aaa      在当前目录下创建一个名为 aaa 的目录\n\nmkdir /usr/aaa 在指定目录下创建一个名为 aaa 的目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("2.3.2 删除目录或文件【删】rm")]),s._v(" "),n("p",[s._v("命令：rm [-rf] 目录")]),s._v(" "),n("p",[s._v("删除文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rm 文件     删除当前目录下的文件\n\nrm -f 文件  删除当前目录的的文件（不询问）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("删除目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rm -r aaa   递归删除当前目录下的 aaa 目录\n\nrm -rf aaa  递归删除当前目录下的 aaa 目录（不询问）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("全部删除：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rm -rf \\*   将当前目录下的所有目录和文件全部删除\n\nrm -rf /\\*  【自杀命令！慎用！慎用！慎用！】将根目录下的所有文件全部删除\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：rm 不仅可以删除目录，也可以删除其他文件或压缩包，为了方便大家的记忆，无论删除任何目录或文件，都直接使用 rm -rf 目录/文件/压缩包")])]),s._v(" "),n("p",[s._v("2.3.3 目录修改【改】mv 和 cp")]),s._v(" "),n("p",[s._v("一、重命名目录")]),s._v(" "),n("p",[s._v("命令：mv 当前目录 新目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mv aaa bbb    将目录aaa改为bbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：mv 的语法不仅可以对目录进行重命名而且也可以对各种文件，压缩包等进行 重命名的操作")])]),s._v(" "),n("p",[s._v("二、剪切目录")]),s._v(" "),n("p",[s._v("命令：mv 目录名称 目录的新位置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mv /usr/tmp/aaa /usr    将/usr/tmp 目录下的 aaa 目录剪切到 /usr 目录下面\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：mv 语法不仅可以对目录进行剪切操作，对文件和压缩包等都可执行剪切操作")])]),s._v(" "),n("p",[s._v("三、拷贝目录")]),s._v(" "),n("p",[s._v("命令：cp -r 目录名称 目录拷贝的目标位置 -r 代表递归")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /usr/tmp/aaa  /usr   将/usr/tmp目录下的aaa目录复制到 /usr目录下面\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：cp 命令不仅可以拷贝目录还可以拷贝文件，压缩包等，拷贝文件和压缩包时不 用写-r 递归")])]),s._v(" "),n("p",[s._v("2.3.4 搜索目录【查】find")]),s._v(" "),n("p",[s._v("命令：find 目录 参数 文件名称")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("find /usr/tmp -name 'a\\*' 查找/usr/tmp 目录下的所有以 a 开头的目录或文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"三、文件操作命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、文件操作命令"}},[s._v("#")]),s._v(" 三、文件操作命令")]),s._v(" "),n("p",[s._v("3.1 文件操作【增，删，改，查】")]),s._v(" "),n("p",[s._v("3.1.1 新建文件【增】touch")]),s._v(" "),n("p",[s._v("命令：touch 文件名")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("touch aa.txt    在当前目录创建一个名为 aa.txt 的文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.1.2 删除文件 【删】 rm")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rm -rf 文件名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.1.3 修改文件【改】 vi 或 vim")]),s._v(" "),n("p",[s._v("【vi 编辑器的 3 种模式】\n基本上 vi 可以分为三种状态，分别是命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode），各模式的功能区分如下：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("命令行模式 command mode）")]),s._v(" "),n("p",[s._v("控制屏幕光标的移动，字符、字或行的删除，查找，移动复制某区段及进入 Insert mode 下，或者到 last line mode。")]),s._v(" "),n("p",[s._v("命令行模式下的常用命令：")]),s._v(" "),n("p",[s._v("【1】控制光标移动：↑，↓，j")]),s._v(" "),n("p",[s._v("【2】删除当前行：dd")]),s._v(" "),n("p",[s._v("【3】查找：/字符")]),s._v(" "),n("p",[s._v("【4】进入编辑模式：i o a")]),s._v(" "),n("p",[s._v("【5】进入底行模式：:")])]),s._v(" "),n("li",[n("p",[s._v("编辑模式（Insert mode）")]),s._v(" "),n("p",[s._v("只有在 Insert mode 下，才可以做文字输入，按「ESC」键可回到命令行模式。")]),s._v(" "),n("p",[s._v("编辑模式下常用命令：")]),s._v(" "),n("p",[s._v("【1】ESC 退出编辑模式到命令行模式；")])]),s._v(" "),n("li",[n("p",[s._v("底行模式（last line mode）")]),s._v(" "),n("p",[s._v("将文件保存或退出 vi，也可以设置编辑环境，如寻找字符串、列出行号……等。")]),s._v(" "),n("p",[s._v("底行模式下常用命令：")]),s._v(" "),n("p",[s._v("【1】退出编辑： :q")]),s._v(" "),n("p",[s._v("【2】强制退出： :q!")]),s._v(" "),n("p",[s._v("【3】保存并退出： :wq")])])]),s._v(" "),n("h5",{attrs:{id:"打开文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打开文件"}},[s._v("#")]),s._v(" 打开文件")]),s._v(" "),n("p",[s._v("命令：vi 文件名")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vi aa.txt 或者 vim aa.txt   打开当前目录下的 aa.txt 文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("注意：使用 vi 编辑器打开文件后，并不能编辑，因为此时处于命令模式，点击键盘 i/a/o 进入编辑模式。")])]),s._v(" "),n("h5",{attrs:{id:"编辑文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编辑文件"}},[s._v("#")]),s._v(" 编辑文件")]),s._v(" "),n("p",[s._v("使用 vi 编辑器打开文件后点击按键：i ，a 或者 o 即可进入编辑模式。")]),s._v(" "),n("p",[s._v("i: 在光标所在字符前开始插入")]),s._v(" "),n("p",[s._v("a: 在光标所在字符后开始插入")]),s._v(" "),n("p",[s._v("o: 在光标所在行的下面另起一新行插入")]),s._v(" "),n("h5",{attrs:{id:"保存或者取消编辑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#保存或者取消编辑"}},[s._v("#")]),s._v(" 保存或者取消编辑")]),s._v(" "),n("h5",{attrs:{id:"保存文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#保存文件"}},[s._v("#")]),s._v(" 保存文件：")]),s._v(" "),n("p",[s._v("第一步：ESC 进入命令行模式")]),s._v(" "),n("p",[s._v("第二步：: 进入底行模式")]),s._v(" "),n("p",[s._v("第三步：wq 保存并退出编辑")]),s._v(" "),n("h5",{attrs:{id:"取消编辑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#取消编辑"}},[s._v("#")]),s._v(" 取消编辑：")]),s._v(" "),n("p",[s._v("第一步：ESC 进入命令行模式")]),s._v(" "),n("p",[s._v("第二步：: 进入底行模式")]),s._v(" "),n("p",[s._v("第三步：q! 撤销本次修改并退出编辑")]),s._v(" "),n("p",[s._v("3.1.4 文件的查看【查】")]),s._v(" "),n("p",[s._v("文件的查看命令：cat/more/less/tail")]),s._v(" "),n("p",[s._v("cat：看最后一屏")]),s._v(" "),n("p",[s._v("示例：使用 cat 查看/etc/sudo.conf 文件，只能显示最后一屏内容")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cat sudo.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("more：百分比显示")]),s._v(" "),n("p",[s._v("示例：使用 more 查看/etc/sudo.conf 文件，可以显示百分比，回车可以向下一行，空格可以向下一页，q 可以退出查看")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("more sudo.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("less：翻页查看")]),s._v(" "),n("p",[s._v("示例：使用 less 查看/etc/sudo.conf 文件，可以使用键盘上的 PgUp 和 PgDn 向上 和向下翻页，q 结束查看")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("less sudo.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("tail：指定行数或者动态查看")]),s._v(" "),n("p",[s._v("示例：使用 tail -10 查看/etc/sudo.conf 文件的后 10 行，Ctrl+C 结束")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tail -10 sudo.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.2 权限修改")]),s._v(" "),n("p",[s._v("rwx：r 代表可读，w 代表可写，x 代表该文件是一个可执行文件，如果 rwx 任意位置变为-则代表不可读或不可写或不可执行文件。")]),s._v(" "),n("p",[s._v("示例：给 aaa.txt 文件权限改为可执行文件权限，aaa.txt 文件的权限是-rw-------")]),s._v(" "),n("p",[s._v("第一位：-就代表是文件，d 代表是文件夹")]),s._v(" "),n("p",[s._v("第一段（3 位）：代表拥有者的权限")]),s._v(" "),n("p",[s._v("第二段（3 位）：代表拥有者所在的组，组员的权限")]),s._v(" "),n("p",[s._v("第三段（最后 3 位）：代表的是其他用户的权限")]),s._v(" "),n("p",[s._v("421 421 421")]),s._v(" "),n("p",[n("code",[s._v("- rw- --- ---")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：chmod +x aaa.txt\n或者采用 8421 法\n命令：chmod 100 aaa.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"四、压缩文件操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、压缩文件操作"}},[s._v("#")]),s._v(" 四、压缩文件操作")]),s._v(" "),n("p",[s._v("4.1 打包和压缩")]),s._v(" "),n("p",[s._v("Windows 的压缩文件的扩展名 .zip/.rar")]),s._v(" "),n("p",[s._v("linux 中的打包文件：aa.tar")]),s._v(" "),n("p",[s._v("linux 中的压缩文件：bb.gz")]),s._v(" "),n("p",[s._v("linux 中打包并压缩的文件：.tar.gz")]),s._v(" "),n("p",[s._v("Linux 中的打包文件一般是以.tar 结尾的，压缩的命令一般是以.gz 结尾的。")]),s._v(" "),n("p",[s._v("而一般情况下打包和压缩是一起进行的，打包并压缩后的文件的后缀名一般.tar.gz。")]),s._v(" "),n("p",[s._v("命令： "),n("code",[s._v("tar -zcvf 打包压缩后的文件名 要打包的文件")])]),s._v(" "),n("p",[s._v("其中：")]),s._v(" "),n("ul",[n("li",[s._v("z：调用 gzip 压缩命令进行压缩")]),s._v(" "),n("li",[s._v("c：打包文件")]),s._v(" "),n("li",[s._v("v：显示运行过程")]),s._v(" "),n("li",[s._v("f：指定文件名")])]),s._v(" "),n("p",[s._v("示例：打包并压缩/usr/tmp 下的所有文件 压缩后的压缩包指定名称为 xxx.tar")]),s._v(" "),n("p",[n("code",[s._v("tar -zcvf ab.tar aa.txt bb.txt 或：tar -zcvf ab.tar \\*")])]),s._v(" "),n("p",[s._v("4.2 解压")]),s._v(" "),n("p",[s._v("命令：tar [-zxvf] 压缩文件")]),s._v(" "),n("p",[s._v("其中：x：代表解压")]),s._v(" "),n("p",[s._v("示例：将/usr/tmp 下的 ab.tar 解压到当前目录下")]),s._v(" "),n("p",[n("img",{attrs:{src:e(420),alt:"picture"}})]),s._v(" "),n("p",[s._v("示例：将/usr/tmp 下的 ab.tar 解压到根目录/usr 下")]),s._v(" "),n("p",[n("code",[s._v("tar -xvf ab.tar -C /usr------C 代表指定解压的位置")])]),s._v(" "),n("p",[n("img",{attrs:{src:e(421),alt:"picture"}})]),s._v(" "),n("h2",{attrs:{id:"五、查找命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、查找命令"}},[s._v("#")]),s._v(" 五、查找命令")]),s._v(" "),n("p",[s._v("5.1 grep")]),s._v(" "),n("p",[s._v("grep 命令是一种强大的文本搜索工具")]),s._v(" "),n("p",[s._v("使用实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ps -ef | grep sshd                  查找指定 ssh 服务进程\nps -ef | grep sshd | grep -v grep   查找指定服务进程，排除 gerp 身\nps -ef | grep sshd -c               查找指定进程个数\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("5.2 find")]),s._v(" "),n("p",[s._v("find 命令在目录结构中搜索文件，并对搜索结果执行指定的操作。")]),s._v(" "),n("p",[s._v("find 默认搜索当前目录及其子目录，并且不过滤任何结果（也就是返回所有文件），将它们全都显示在屏幕上。")]),s._v(" "),n("p",[s._v("使用实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('find . -name "_.log" -ls      在当前目录查找以.log 结尾的文件，并显示详细信息。\nfind /root/ -perm 600         查找/root/目录下权限为 600 的文件\nfind . -type f -name "_.log"  查找当目录，以.log 结尾的普通文件\nfind . -type d | sort         查找当前所有目录并排序\nfind . -size +100M            查找当前目录大于 100M 的文件\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("5.3 locate")]),s._v(" "),n("p",[s._v("locate 让使用者可以很快速的搜寻某个路径。默认每天自动更新一次，所以使用 locate 命令查不到最新变动过的文件。为了避免这种情况，可以在使用 locate 之前，先使用 updatedb 命令，手动更新数据库。如果数据库中没有查询的数据，则会报出 locate: can not stat () `/var/lib/mlocate/mlocate.db': No such file or directory 该错误！updatedb 即可！")]),s._v(" "),n("p",[n("strong",[s._v("yum -y install mlocate 如果是精简版 CentOS 系统需要安装 locate 命令")])]),s._v(" "),n("p",[s._v("使用实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("updatedb\nlocate /etc/sh  搜索 etc 目录下所有以 sh 开头的文件\nlocate pwd      查找和 pwd 相关的所有文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("5.4 whereis")]),s._v(" "),n("p",[s._v("whereis 命令是定位可执行文件、源代码文件、帮助文件在文件系统中的位置。这些文件的属性应属于原始代码，二进制文件，或是帮助文件。")]),s._v(" "),n("p",[s._v("使用实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("whereis ls 将和 ls 文件相关的文件都查找出来\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("5.5 which")]),s._v(" "),n("p",[s._v("which 命令的作用是在 PATH 变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果。")]),s._v(" "),n("p",[s._v("使用实例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("which pwd   查找 pwd 命令所在路径\nwhich java  查找 path 中 java 的路径\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"六、su、sudo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、su、sudo"}},[s._v("#")]),s._v(" 六、su、sudo")]),s._v(" "),n("p",[s._v("6.1 su")]),s._v(" "),n("p",[s._v("su 用于用户之间的切换。但是切换前的用户依然保持登录状态。如果是 root 向普通或虚拟用户切换不需要密码，反之普通用户切换到其它任何用户都需要密码验证。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("su test:    切换到 test 用户，但是路径还是/root 目录\nsu - test : 切换到 test 用户，路径变成了/home/test\nsu :        切换到 root 用户，但是路径还是原来的路径\nsu - :      切换到 root 用户，并且路径是/root\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("su 不足：如果某个用户需要使用 root 权限、则必须要把 root 密码告诉此用户。")]),s._v(" "),n("p",[s._v("退出返回之前的用户： "),n("code",[s._v("exit")])]),s._v(" "),n("p",[s._v("6.2 sudo")]),s._v(" "),n("p",[s._v("sudo 是为所有想使用 root 权限的普通用户设计的。可以让普通用户具有临时使用 root 权限的权利。只需输入自己账户的密码即可。")]),s._v(" "),n("p",[s._v("进入 sudo 配置文件命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vi /etc/sudoer 或者 visudo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("案例：\n允许 hadoop 用户以 root 身份执行各种应用命令，需要输入 hadoop 用户的密码。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("hadoop ALL=(ALL) ALL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("案例：\n只允许 hadoop 用户以 root 身份执行 ls 、cat 命令，并且执行时候免输入密码。\n配置文件中：\nhadoop ALL=NOPASSWD: /bin/ls, /bin/cat")]),s._v(" "),n("h2",{attrs:{id:"七、系统服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、系统服务"}},[s._v("#")]),s._v(" 七、系统服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service iptables status   --查看 iptables 服务的状态\nservice iptables start    --开启 iptables 服务\nservice iptables stop     --停止 iptables 服务\nservice iptables restart  --重启 iptables 服务\n\nchkconfig iptables off    --关闭 iptables 服务的开机自启动\nchkconfig iptables on     --开启 iptables 服务的开机自启动\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"八、网络管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#八、网络管理"}},[s._v("#")]),s._v(" 八、网络管理")]),s._v(" "),n("p",[s._v("8.1 主机名配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@node1 ~]# vi /etc/sysconfig/network\nNETWORKING=yes\nHOSTNAME=node1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("8.2 IP 地址配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@node1 ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("8.3 域名映射")]),s._v(" "),n("p",[s._v("/etc/hosts 文件用于在通过主机名进行访问时做 ip 地址解析之用。所以，你想访问一个什么样的主机名，就需要把这个主机名和它对应的 ip 地址。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@node1 ~]# vi /etc/hosts\n\n#### 在最后加上\n\n192.168.52.201 node1\n192.168.52.202 node2\n192.168.52.203 node3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"九、定时任务指令-crontab-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#九、定时任务指令-crontab-配置"}},[s._v("#")]),s._v(" 九、定时任务指令 crontab 配置")]),s._v(" "),n("p",[s._v("crontab 是 Unix 和 Linux 用于设置定时任务的指令。通过 crontab 命令，可以在固定间隔时间, 执行指定的系统指令或 shell 脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。")]),s._v(" "),n("p",[s._v("crontab 安装：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum install crontabs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("服务操作说明：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service crond start   ## 启动服务\nservice crond stop    ## 关闭服务\nservice crond restart ## 重启服务\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("9.1 命令格式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("crontab [-u user] file\n\ncrontab [-u user][ -e | -l | -r ]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("参数说明：")]),s._v(" "),n("p",[n("code",[s._v("-u user")]),s._v(" ：用来设定某个用户的 crontab 服务")]),s._v(" "),n("p",[n("code",[s._v("file")]),s._v(" ：file 是命令文件的名字, 表示将 file 做为 crontab 的任务列表文件")]),s._v(" "),n("p",[s._v("并载入 crontab。")]),s._v(" "),n("p",[n("code",[s._v("-e")]),s._v(" ：编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前")]),s._v(" "),n("p",[s._v("用户的 crontab 文件。")]),s._v(" "),n("p",[n("code",[s._v("-l")]),s._v(" ：显示某个用户的 crontab 文件内容。如果不指定用户，则表示显示当前")]),s._v(" "),n("p",[s._v("用户的 crontab 文件内容。")]),s._v(" "),n("p",[n("code",[s._v("-r")]),s._v(" ：删除定时任务配置，从/var/spool/cron 目录中删除某个用户的 crontab")]),s._v(" "),n("p",[s._v("文件，如果不指定用户，则默认删除当前用户的 crontab 文件。")]),s._v(" "),n("p",[s._v("命令示例：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("crontab file [-u user]  ## 用指定的文件替代目前的 crontab\ncrontab -l [-u user]    ## 列出用户目前的 crontab\ncrontab -e [-u user]    ## 编辑用户目前的 crontab\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("9.2 配置说明、实例")]),s._v(" "),n("p",[s._v("命令： "),n("code",[s._v("* * * * * command")])]),s._v(" "),n("p",[s._v("解释：分 时 日 月 周 命令")]),s._v(" "),n("p",[s._v("第 1 列表示分钟 1 ～ 59 每分钟用*或者 */1 表示")]),s._v(" "),n("p",[s._v("第 2 列表示小时 0 ～ 23（0 表示 0 点）")]),s._v(" "),n("p",[s._v("第 3 列表示日期 1 ～ 31")]),s._v(" "),n("p",[s._v("第 4 列表示月份 1 ～ 12")]),s._v(" "),n("p",[s._v("第 5 列标识号星期 0 ～ 6（0 表示星期天）")]),s._v(" "),n("p",[s._v("第 6 列要运行的命令")]),s._v(" "),n("p",[s._v("配置实例：")]),s._v(" "),n("p",[s._v("先打开定时任务所在的文件：\n"),n("code",[s._v("crontab -e")])]),s._v(" "),n("p",[s._v("每分钟执行一次 date 命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("_/1 _ * * * date >> /root/date.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("每晚的 21:30 重启 apache。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("30 21 * * * service httpd restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("每月 1、10、22 日的 4 : 45 重启 apache。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("45 4 1,10,22 * * service httpd restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("每周六、周日的 1 : 10 重启 apache。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("10 1 * * 6,0 service httpd restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("每天 18 : 00 至 23 : 00 之间每隔 30 分钟重启 apache。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("0,30 18-23 * * * service httpd restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("晚上 11 点到早上 7 点之间，每隔一小时重启 apache")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- 23-7/1 * * * service httpd restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"十、其他命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十、其他命令"}},[s._v("#")]),s._v(" 十、其他命令")]),s._v(" "),n("p",[s._v("10.1 查看当前目录：pwd")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pwd 查看当前目录路径\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.2 查看进程：ps -ef")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ps -ef 查看所有正在运行的进程\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.3 结束进程：kill")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：kill pid 或者 kill -9 pid(强制杀死进程) pid:进程号\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.4 网络通信命令：")]),s._v(" "),n("p",[s._v("ifconfig：查看网卡信息")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：ifconfig 或 ifconfig | more\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("ping：查看与某台机器的连接情况")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：ping ip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("netstat -an：查看当前系统端口")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：netstat -an\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("搜索指定端口")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：netstat -an | grep 8080\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.5 配置网络")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：setup\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.6 重启网络")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：service network restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.7 切换用户")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：su - 用户名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.8 关闭防火墙")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：chkconfig iptables off\n\n或者：\n\niptables -L;\niptables -F;\nservice iptables stop\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("10.9 修改文件权限")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：chmod 777\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.10 清屏")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("命令：ctrl + l\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("10.11 vi 模式下快捷键")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("esc 后:\n\n保存并退出快捷键：shift+z+z\n\n光标跳到最后一行快捷键：shift+g\n\n删除一行：dd\n\n复制一行内容：y+y\n\n粘贴复制的内容：p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"十一、linux-项目部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十一、linux-项目部署"}},[s._v("#")]),s._v(" 十一、Linux 项目部署")]),s._v(" "),n("p",[s._v("11.1 安装 jdk1.8")]),s._v(" "),n("p",[s._v("先卸载 open-jdk")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("java -version\n\nrpm -qa | grep java\n\nrpm -e --nodeps java-1.7.0-openjdk-1.7.0.45-2.4.3.3.el6.x86_64\n\nrpm -e --nodeps java-1.6.0-openjdk-1.6.0.0-1.66.1.13.0.el6.x86_64\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("开始安装：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir /usr/local/src/java\n\nrz 上传 jdk tar 包\n\ntar -zxvf jdk-8u181-linux-x64.tar.gz\n\nyum install glibc.i686\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("配置环境变量：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vi /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("在末尾行添加")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#set java environment\n\nJAVA_HOME=/usr/local/src/jdk8/jdk1.8.0_181\n\nCLASSPATH=.:\\$JAVA_HOME/lib.tools.jar\n\nPATH=$JAVA_HOME/bin:$PATH\n\nexport JAVA_HOME CLASSPATH PATH\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# vim /etc/profile\n\nexport JAVA_HOME=/usr/java\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib:$CLASSPATH\nexport JAVA_PATH=${JAVA_HOME}/bin:${JRE_HOME}/bin\nexport PATH=$PATH:${JAVA_PATH}\n\n# source /etc/profile 使更改的配置立即生效\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("保存退出")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("source /etc/profile 使更改的配置立即生效\n\njava -version 查看 JDK 版本信息，如果显示出 1.8 证明成功\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.2 安装 MySQL5.6")]),s._v(" "),n("p",[s._v("11.2.1 上传 MySQL5.6 的 tar 包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("创建目录：mkdir /usr/local/src/mysql5.6\n\n上传：MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar 到上面的目录中\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.2.2 安装")]),s._v(" "),n("p",[s._v("第一步：解压")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：tar -xvf MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第二步：检测是否已经安装了 mysql")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：rpm -qa | grep mysql\n\n     如果已经安装了，将其卸载，如：\n\n     rpm -e --nodeps  mysql-libs-5.1.71-1.el6.x86_64\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("第三步：安装 MySQL 的服务端")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：rpm -ivh MySQL-server-5.6.34-1.rhel5.x86_64.rpm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第四步：安装 MySQL 的客户端")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：rpm -ivh MySQL-client-5.6.34-1.rhel5.x86_64.rpm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第五步：查看 MySQL 服务运行状态")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：service mysql status\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第六步：启动 MySQL 服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     命令：service mysql start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第七步：使用 root 账号登录 mysql")]),s._v(" "),n("p",[s._v("在安装 mysql server 时有句提示：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(422),alt:"picture"}})]),s._v(" "),n("p",[s._v("注意：这个密码是不安全的，所有需要修改初始密码。\n使用密码登录 mysql 账号：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql -uroot -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改 root 密码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SET PASSWORD = PASSWORD('root');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.2.3 开机自动启动设置")]),s._v(" "),n("p",[s._v("加入到系统服务：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig --add mysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("自动启动：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig mysql on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查询列表：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("说明：都没关闭（off）时是没有自动启动。")]),s._v(" "),n("p",[s._v("11.2.4 开启远程访问")]),s._v(" "),n("p",[s._v("登录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql -uroot –proot\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("设置远程访问（使用 root 密码）：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("grant all privileges on _._ to 'root' @'%' identified by 'root';\n\nflush privileges;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("退出 mysql，在 centos 环境下打开 3306 防火墙")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT\n\n/etc/rc.d/init.d/iptables save\n\n/etc/init.d/iptables status\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("11.3 安装 tomcat 部署项目")]),s._v(" "),n("p",[s._v("准备工作：将 web 项目打成 war 包，改名为 ROOT.war")]),s._v(" "),n("p",[s._v("11.3.1 创建 ucenter 用户")]),s._v(" "),n("p",[s._v("一般情况下，发布应用程序都不是使用 root 用户的，需要创建一个普通用户来发布程序；")]),s._v(" "),n("p",[s._v("创建 ucenter 用户：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("useradd -d /ucenter ucenter\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("设置密码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("passwd ucenter （密码 ucenter）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("切换用户：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("su - ucenter\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.3.2 安装 Tomcat")]),s._v(" "),n("p",[s._v("tomcat 只要解压就可以使用。")]),s._v(" "),n("p",[s._v("1、创建 web 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir /ucenter/web\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2、上传 apache-tomcat-7.0.57.tar.gz")]),s._v(" "),n("p",[s._v("3、解压： "),n("code",[s._v("tar -xvf apache-tomcat-7.0.57.tar.gz")])]),s._v(" "),n("p",[s._v("4、重命名： "),n("code",[s._v("mv apache-tomcat-7.0.57 itcast-usermanage")])]),s._v(" "),n("p",[s._v("5、启动 tomcat：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd itcast-usermanage/bin/\n\n./startup.sh 或者 sh startup.sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("6、查看日志：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tail -f ../logs/catalina.out\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("7、查看效果 http://192.168.0.160:8080/")]),s._v(" "),n("p",[s._v("发现无法访问：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(423),alt:"picture"}})]),s._v(" "),n("p",[s._v("8、防火墙打开 8080 端口")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT\n\n/etc/rc.d/init.d/iptables save\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("9、安装成功")]),s._v(" "),n("p",[n("img",{attrs:{src:e(424),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.3.3 部署用户管理项目")]),s._v(" "),n("p",[s._v("1、上传 usermanage.sql 和 ROOT.war 到/ucenter/web")]),s._v(" "),n("p",[s._v("2、执行数据库脚本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cat user_manager.sql | mysql -uroot -p123456\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3、部署 web 程序")]),s._v(" "),n("p",[s._v("3.1 删除 webapps 下的所有文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /ucenter/web/usermanage/webapps\n\nrm -rf *\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("3.2 拷贝 ROOT.war 到 webapps")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /ucenter/web/ROOT.war .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.3 重新启动 tomcat")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ../bin/\n\nsh startup.sh && tail -f ../logs/catalina.out\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("3.4 启动浏览器测试")]),s._v(" "),n("p",[s._v("注意事项：Centos 环境下部署项目中文乱码问题解决方案")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("今天在一台新的CentOS机器上使用c3p0连接池操作mysql数据库出现中文乱码问题，具体表现为：查询时无中文乱码问题，写数据时中文乱码，查看了机器上数据库字符集也是UTF8，应该不会出现中文乱码才对，最后在c3p0配置文件中 jdbcUrl后加上：?useUnicode=true&amp;characterEncoding=UTF8 中文就不会乱码了。\n")])])]),n("p",[s._v("【C3P0 配置文件】")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("c3p0-config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("default-config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("driverClass"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.mysql.jdbc.Driver"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("jdbcUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jdbc:mysql://localhost:3306/user_manager_yun6?useUnicode=true"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[s._v("&amp;")]),s._v("characterEncoding=UTF8 "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("root"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("root"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("acquireIncrement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("initialPoolSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("5"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("minPoolSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("maxPoolSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("5"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("default-config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("c3p0-config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("11.4 Linux 下使用 FastDFS")]),s._v(" "),n("p",[s._v("相关的安装包我打包到云盘上了，链接：https://pan.baidu.com/s/13NDYYil4mgLhkb5CYsc2Ww 提取码：66tn")]),s._v(" "),n("p",[s._v("单节点 FastDFS")]),s._v(" "),n("p",[s._v("整个安装过程非常复杂，很容易出错，建议进行多次备份。")]),s._v(" "),n("p",[s._v("我们这里不打算安装多台虚拟机，因此会把 tracker 和 storage 都安装在一起。")]),s._v(" "),n("p",[s._v("11.4.1 安装 gcc")]),s._v(" "),n("p",[s._v("GCC 用来对 C 语言代码进行编译运行，使用 yum 命令安装：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum -y install gcc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("后面会用到解压命令（unzip），所以这里可以用 yum 把 unzip 也装一下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum install -y unzip zip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.4.2 安装 libevent")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum -y install libevent\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.4.3 安装 libfastcommon-master")]),s._v(" "),n("p",[s._v("解压刚刚上传的 libfastcommon-master.zip")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("unzip libfastcommon-master.zip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("进入解压完成的目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd libfastcommon-master\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("编译并且安装：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./make.sh\n\n./make.sh install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.4.4 安装 fastdfs")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar -zxvf FastDFS_v5.08.tar.gz\ncd FastDFS\n./make.sh\n./make.sh install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("如果安装成功，会看到/etc/init.d/下看到提供的脚本文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ll /etc/init.d/ | grep fdfs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(425),alt:"picture"}})]),s._v(" "),n("ul",[n("li",[s._v("fdfs_trackerd 是 tracker 启动脚本")]),s._v(" "),n("li",[s._v("fdfs_storaged 是 storage 启动脚本")])]),s._v(" "),n("p",[s._v("能够在 /etc/fdfs/ 目录下看到默认的配置文件模板：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ll /etc/fdfs/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(426),alt:"picture"}})]),s._v(" "),n("ul",[n("li",[s._v("tarcker.conf.sample 是 tracker 的配置文件模板")]),s._v(" "),n("li",[s._v("storage.conf.sample 是 storage 的配置文件模板")]),s._v(" "),n("li",[s._v("client.conf.sample 是客户端的配置文件模板")])]),s._v(" "),n("br"),s._v(" "),n("p",[s._v("11.4.5 配置并启动 tracker 服务")]),s._v(" "),n("p",[s._v("1）首先将模板文件复制")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2）修改复制后的配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/fdfs/tracker.conf\n\n# 修改的内容如下：\n\nbase_path=/项目名/tracker # 存储日志和数据的根目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("3）新建目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir -p /项目名/tracker\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("注意：关闭防火墙：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig iptables off\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("4）启动和停止")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service fdfs_trackerd start # 启动 fdfs_trackerd 服务，停止用 stop\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("检查 FastDFS Tracker Server 是否启动成功：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ps -ef | grep fdfs_trackerd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("设置 tracker 服务开机启动:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig fdfs_trackerd on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.4.6 配置并启动 storage 服务")]),s._v(" "),n("p",[s._v("1）首先将模板文件复制")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2）修改复制后的配置文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/fdfs/storage.conf\n\n# 修改的内容如下:\n\nbase_path=/项目名/storage # 数据和日志文件存储根目录\n\nstore_path0=/项目名/storage # 第一个存储目录\n\ntracker_server=192.168.56.101:22122 # tracker 服务器 IP 和端口\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("3）新建目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir -p /项目名/storage\n\n注意关闭防火墙： chkconfig iptables off\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("4）启动和停止")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service fdfs_storaged start # 启动 fdfs_storaged 服务，停止用 stop\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("设置 storage 服务开机启动：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig fdfs_storaged on\n\nps -ef | grep fdfs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:e(427),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.5 安装 fastdfs-nginx-module")]),s._v(" "),n("p",[s._v("11.5.1 解压")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar -zxvf fastdfs-nginx-module_v1.16.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.5.2 修改 config")]),s._v(" "),n("p",[s._v("1）进入 src 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd fastdfs-nginx-module/src/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2）编辑 config")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim config\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用以下底行命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(":%s+/usr/local/+/usr/+g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("将所有的/usr/local 替换为 /usr，这个才是正确的目录:")]),s._v(" "),n("p",[n("img",{attrs:{src:e(428),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.5.3 配置 nginx 与 FastDFS 关联配置文件")]),s._v(" "),n("p",[s._v("复制 fastdfs-nginx-module 源码中的配置文件到/etc/fdfs 目录， 并修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /usr/local/项目名/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/\n\nvi /etc/fdfs/mod_fastdfs.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("修改以下配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("connect_timeout=10 # 客户端访问文件连接超时时长（单位：秒）\n\ntracker_server=192.168.56.101:22122 # tracker 服务 IP 和端口\n\nurl_have_group_name=true # 访问链接前缀加上组名\n\nstore_path0=/leyou/storage # 文件存储路径\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("复制 FastDFS 的部分配置文件到/etc/fdfs 目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /usr/local/项目名/FastDFS/conf/\ncp http.conf mime.types /etc/fdfs/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("11.6 安装 Nginx 的插件")]),s._v(" "),n("p",[s._v("11.6.1 如果没有安装过 nginx")]),s._v(" "),n("p",[s._v("1、安装 nginx 的依赖库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum -y install gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2、解压安装包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar -zxvf nginx-1.10.0.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3、配置 nginx 安装包，并指定 fastdfs-nginx-model")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd nginx-1.10.0\n\n./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/usr/local/leyou/fastdfs-nginx-module/src\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("注意：在执行./configure 配置 nginx 参数的时候，需要将 fastdfs-nginx-moudle 源码作为模块编译进去。")]),s._v(" "),n("p",[s._v("4、编译并安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("make && make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.6.2 如果已经安装过 nginx")]),s._v(" "),n("p",[s._v("1、 进入 nginx 目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /usr/local/项目名/nginx-1.10.0/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("2、 配置 FastDFS 模块")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/usr/local/项目名/fastdfs-nginx-module/src\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("注意：这次配置时，要添加 fastdfs-nginx-moudle 模块")]),s._v(" "),n("p",[s._v("3、编译，注意，这次不要安装（install）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("make\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("4、替换 nginx 二进制文件:")]),s._v(" "),n("p",[s._v("备份：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mv /usr/bin/nginx /usr/bin/nginx-bak\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("用新编译的 nginx 启动文件替代原来的：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp objs/nginx /usr/bin/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.6.3 启动 nginx")]),s._v(" "),n("p",[s._v("配置 nginx 整合 fastdfs-module 模块")]),s._v(" "),n("p",[s._v("我们需要修改 nginx 配置文件，在/opt/nginx/config/nginx.conf 文件中：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /opt/nginx/conf/nginx.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("将文件中，原来的 server 80{ ...} 部分代码替换为如下代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n  listen 80;\n  server_name image.项目名.com; # 监听域名中带有 group 的，交给 FastDFS 模块处理\n  location ~/group([0-9])/ {\n    ngx_fastdfs_module;\n  }\n  location / {\n    root html;\n    index index.html index.htm;\n  }\n  error_page 500 502 503 504 /50x.html;\n  location = /50x.html {\n    root html;\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("启动 nginx：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nginx # 启动 nginx\n\nnginx -s stop # 停止 nginx\n\nnginx -s reload # 重新载入配置文件\n\n# 可通过 ps -ef | grep nginx 查看 nginx 是否已启动成功\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[n("img",{attrs:{src:e(429),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.6.4 设置 nginx 开机启动")]),s._v(" "),n("p",[s._v("创建一个开机启动的脚本：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/init.d/nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加以下内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#!/bin/sh\n\n#\n\n# nginx - this script starts and stops the nginx daemon\n\n#\n\n# chkconfig: - 85 15\n\n# description: NGINX is an HTTP(S) server, HTTP(S) reverse \\\n\n# proxy and IMAP/POP3 proxy server\n\n# processname: nginx\n\n# config: /etc/nginx/nginx.conf\n\n# config: /etc/sysconfig/nginx\n\n# pidfile: /var/run/nginx.pid\n\n# Source function library.\n\n. /etc/rc.d/init.d/functions\n\n# Source networking configuration.\n\n. /etc/sysconfig/network\n\n# Check that networking is up.\n\n[ "$NETWORKING" = "no" ] && exit 0\n\nnginx="/usr/bin/nginx"\nprog=$(basename $nginx)\n\nNGINX_CONF_FILE="/opt/nginx/conf/nginx.conf"\n\n[ -f /etc/sysconfig/nginx ] && . /etc/sysconfig/nginx\n\nlockfile=/var/lock/subsys/nginx\n\nmake_dirs() {\n\n# make required directories\n\nuser=`$nginx -V 2>&1 | grep "configure arguments:.*--user=" | sed \'s/[^*]*--user=\\([^ ]*\\).*/\\1/g\' -`\nif [ -n "$user" ]; then\nif [ -z "`grep $user /etc/passwd`" ]; then\nuseradd -M -s /bin/nologin \\$user\nfi\noptions=`$nginx -V 2>&1 | grep \'configure arguments:\'`\nfor opt in \\$options; do\nif [ `echo $opt | grep \'.*-temp-path\'` ]; then\nvalue=`echo $opt | cut -d "=" -f 2`\nif [ ! -d "$value" ]; then # echo "creating" $value\n                  mkdir -p $value && chown -R $user $value\nfi\nfi\ndone\nfi\n}\n\nstart() {\n[ -x $nginx ] || exit 5\n[ -f $NGINX_CONF_FILE ] || exit 6\nmake_dirs\necho -n $"Starting $prog: "\ndaemon $nginx -c $NGINX_CONF_FILE\nretval=$?\n    echo\n    [ $retval -eq 0 ] && touch $lockfile\n    return $retval\n}\n\nstop() {\necho -n $"Stopping $prog: "\nkillproc $prog -QUIT\n    retval=$?\necho\n[ $retval -eq 0 ] && rm -f $lockfile\n    return $retval\n}\n\nrestart() {\nconfigtest || return \\$?\nstop\nsleep 1\nstart\n}\n\nreload() {\nconfigtest || return $?\n    echo -n $"Reloading $prog: "\n    killproc $nginx -HUP\nRETVAL=\\$?\necho\n}\n\nforce_reload() {\nrestart\n}\n\nconfigtest() {\n$nginx -t -c $NGINX_CONF_FILE\n}\n\nrh_status() {\nstatus \\$prog\n}\n\nrh_status_q() {\nrh_status >/dev/null 2>&1\n}\n\ncase "$1" in\n    start)\n        rh_status_q && exit 0\n        $1\n;;\nstop)\nrh_status_q || exit 0\n$1\n        ;;\n    restart|configtest)\n        $1\n;;\nreload)\nrh_status_q || exit 7\n$1\n        ;;\n    force-reload)\n        force_reload\n        ;;\n    status)\n        rh_status\n        ;;\n    condrestart|try-restart)\n        rh_status_q || exit 0\n            ;;\n    *)\n        echo $"Usage: \\$0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}"\nexit 2\nesac\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br")])]),n("p",[s._v("修改文件权限，并加入服务列表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 修改权限\n\nchmod 777 /etc/init.d/nginx\n\n# 添加到服务列表\n\nchkconfig --add /etc/init.d/nginx\n\n设置开机启动\n\nchkconfig nginx on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("11.7 安装 Elasticsearch")]),s._v(" "),n("p",[s._v("需要虚拟机 JDK1.8 及以上")]),s._v(" "),n("p",[s._v("11.7.1 新建一个用户 leyou")]),s._v(" "),n("p",[s._v("出于安全考虑，elasticsearch 默认不允许以 root 账号运行。")]),s._v(" "),n("p",[s._v("创建用户：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("useradd leyou\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("设置密码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("passwd leyou\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("切换用户：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("su - leyou\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.7.2 上传安装包, 并解压")]),s._v(" "),n("p",[s._v("我们将安装包上传到：/home/leyou 目录")]),s._v(" "),n("p",[s._v("解压缩：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar -zxvf elasticsearch-6.2.4.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("我们把目录重命名：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mv elasticsearch-6.3.0/ elasticsearch\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(430),alt:"picture"}})]),s._v(" "),n("p",[s._v("进入，查看目录结构：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(431),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.7.3 修改配置")]),s._v(" "),n("p",[s._v("我们进入 config 目录： "),n("code",[s._v("cd config")])]),s._v(" "),n("p",[s._v("需要修改的配置文件有两个：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(432),alt:"picture"}})]),s._v(" "),n("p",[s._v("1、jvm.options")]),s._v(" "),n("p",[s._v("Elasticsearch 基于 Lucene 的，而 Lucene 底层是 java 实现，因此我们需要配置 jvm 参数。")]),s._v(" "),n("p",[s._v("编辑 jvm.options：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim jvm.options\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("默认配置如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-Xms1g\n\n-Xmx1g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("内存占用太多了，我们调小一些：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-Xms512m\n\n-Xmx512m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("2、elasticsearch.yml")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim elasticsearch.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改数据和日志目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("path.data: /home/leyou/elasticsearch/data # 数据目录位置\npath.logs: /home/leyou/elasticsearch/logs # 日志目录位置\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("我们把 data 和 logs 目录修改指向了 elasticsearch 的安装目录。但是这两个目录并不存在，因此我们需要创建出来。")]),s._v(" "),n("p",[s._v("进入 elasticsearch 的根目录，然后创建：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir data\nmkdir logs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("img",{attrs:{src:e(433),alt:"picture"}})]),s._v(" "),n("p",[s._v("修改绑定的 ip：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("network.host: 0.0.0.0 # 绑定到 0.0.0.0，允许任何 ip 来访问\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("默认只允许本机访问，修改为 0.0.0.0 后则可以远程访问")]),s._v(" "),n("p",[s._v("11.7.4 运行")]),s._v(" "),n("p",[s._v("进入 elasticsearch/bin 目录，可以看到下面的执行文件：")]),s._v(" "),n("p",[n("img",{attrs:{src:e(434),alt:"picture"}})]),s._v(" "),n("p",[s._v("然后输入命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./elasticsearch\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("或者后台运行：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./elasticsearch -d\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.7.5 错误 1：内核过低")]),s._v(" "),n("p",[n("img",{attrs:{src:e(435),alt:"picture"}})]),s._v(" "),n("p",[s._v("修改 elasticsearch.yml 文件，在最下面添加如下配置： 然后重启")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("bootstrap.system_call_filter: false\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.7.6 错误 2：文件权限不足")]),s._v(" "),n("p",[n("img",{attrs:{src:e(436),alt:"picture"}})]),s._v(" "),n("p",[s._v("我们用的是 leyou 用户，而不是 root，所以文件权限不足。")]),s._v(" "),n("p",[s._v("首先用 root 用户登录。直接输入 exit 命令")]),s._v(" "),n("p",[s._v("然后修改配置文件:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/security/limits.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加下面的内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- soft nofile 65536\n\n- hard nofile 131072\n\n- soft nproc 4096\n\n- hard nproc 4096\n\n  11.7.7 错误 3：线程数不够\n\n[1]: max number of threads [1024] for user [leyou] is too low, increase to at least [4096]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("继续修改配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/security/limits.d/90-nproc.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改下面的内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- soft nproc 1024\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("改为")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- soft nproc 4096\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.7.8 错误 4：进程虚拟内存")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[3]: max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("vm.max_map_count：限制一个进程可以拥有的 VMA(虚拟内存区域)的数量，继续修改配置文件， ：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/sysctl.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加下面内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vm.max_map_count=655360\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后执行命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sysctl -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.7.9 重启终端窗口")]),s._v(" "),n("p",[s._v("所有错误修改完毕，一定要重启你的 Xshell 终端，否则配置无效。")]),s._v(" "),n("p",[s._v("11.8 安装 RabbitMQ")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /usr/local/myapp\n\nmkdir rabbitmq\n\ncd rabbitmq\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("11.8.1 安装 Erlang")]),s._v(" "),n("p",[s._v("1、在线安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum install esl-erlang_17.3-1~centos~6_amd64.rpm\n\nyum install esl-erlang-compat-R14B-1.el6.noarch.rpm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("2、离线安装")]),s._v(" "),n("p",[n("img",{attrs:{src:e(437),alt:"picture"}})]),s._v(" "),n("p",[s._v("依次执行命令：")]),s._v(" "),n("p",[s._v("1） "),n("code",[s._v("rpm -ivh esl-erlang-17.3-1.x86_64.rpm --force --nodeps")])]),s._v(" "),n("p",[n("img",{attrs:{src:e(438),alt:"picture"}})]),s._v(" "),n("p",[s._v("2） "),n("code",[s._v("rpm -ivh esl-erlang_17.3-1~centos~6_amd64.rpm --force --nodeps")])]),s._v(" "),n("p",[n("img",{attrs:{src:e(439),alt:"picture"}})]),s._v(" "),n("p",[s._v("3） "),n("code",[s._v("rpm -ivh esl-erlang-compat-R14B-1.el6.noarch.rpm --force --nodeps")])]),s._v(" "),n("p",[n("img",{attrs:{src:e(440),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.8.2 安装 RabbitMQ")]),s._v(" "),n("p",[n("img",{attrs:{src:e(441),alt:"picture"}})]),s._v(" "),n("p",[s._v("安装：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rpm -ivh rabbitmq-server-3.4.1-1.noarch.rpm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(442),alt:"picture"}})]),s._v(" "),n("p",[s._v("11.8.3 设置配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example\n/etc/rabbitmq/rabbitmq.config\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("开启用户远程访问")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vi /etc/rabbitmq/rabbitmq.config\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(443),alt:"picture"}})]),s._v(" "),n("p",[n("strong",[s._v("注意要去掉后面的逗号。")])]),s._v(" "),n("p",[s._v("11.8.4 启动、停止")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("service rabbitmq-server start\n\nservice rabbitmq-server stop\n\nservice rabbitmq-server restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("11.8.5 开启 web 界面管理工具")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rabbitmq-plugins enable rabbitmq_management\n\nservice rabbitmq-server restart\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.8.6 设置开机启动")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig rabbitmq-server on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("11.8.7 防火墙开放 15672 端口")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/sbin/iptables -I INPUT -p tcp --dport 15672 -j ACCEPT\n\n/etc/rc.d/init.d/iptables save\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.9 redis 安装和配置")]),s._v(" "),n("p",[s._v("11.9.1 安装")]),s._v(" "),n("p",[s._v("解压")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar -xvf redis-4.0.9.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("编译安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mv redis-4.0.9 redis\ncd redis\nmake && make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.9.2 配置")]),s._v(" "),n("p",[s._v("修改安装目录下的 redis.conf 文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim redis.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改以下配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#bind 127.0.0.1 # 将这行代码注释，监听所有的 ip 地址，外网可以访问\nprotected-mode no # 把 yes 改成 no，允许外网访问\ndaemonize yes # 把 no 改成 yes，后台运行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("11.9.3 启动或停止")]),s._v(" "),n("p",[s._v("redis 提供了服务端命令和客户端命令：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("redis-server 服务端命令，可以包含以下参数： start 启动 stop 停止")])]),s._v(" "),n("li",[n("p",[s._v("redis-cli 客户端控制台，包含参数： -h xxx 指定服务端地址，缺省值是 127.0.0.1 -p xxx 指定服务端端口，缺省值是 6379")]),s._v(" "),n("p",[s._v("11.9.4 设置开机启动")])])]),s._v(" "),n("ol",[n("li",[s._v("输入命令，新建文件")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/init.d/redis\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("输入下面内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#!/bin/sh\n\n# chkconfig: 2345 90 10\n\n# description: Redis is a persistent key-value database\n\nPATH=/usr/local/bin:/sbin:/usr/bin:/bin\n\nREDISPORT=6379\nEXEC=/usr/local/bin/redis-server\nREDIS_CLI=/usr/local/bin/redis-cli\n\nPIDFILE=/var/run/redis.pid\n\nCONF="/usr/local/leyou/redis/redis.conf"\n\ncase "$1" in\n    start)\n        if [ -f $PIDFILE ]\n then\n echo "$PIDFILE exists, process is already running or crashed"\n        else\n                echo "Starting Redis server..."\n                $EXEC $CONF\n        fi\n        if [ "$?"="0" ]\n then\n echo "Redis is running..."\n fi\n ;;\n stop)\n if [ ! -f $PIDFILE ]\n then\n echo "$PIDFILE does not exist, process is not running"\n        else\n                PID=$(cat $PIDFILE)\n                echo "Stopping ..."\n                $REDIS_CLI -p $REDISPORT SHUTDOWN\n                while [ -x ${PIDFILE} ]\n do\n echo "Waiting for Redis to shutdown ..."\n sleep 1\n done\n echo "Redis stopped"\n fi\n ;;\n restart|force-reload)\n ${0} stop\n        ${0} start\n ;;\n \\*)\n echo "Usage: /etc/init.d/redis {start|stop|restart|force-reload}" >&2\n exit 1\nesac\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br")])]),n("p",[s._v("然后保存退出")]),s._v(" "),n("p",[s._v("注意：以下信息需要根据安装目录进行调整：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('EXEC=/usr/local/bin/redis-server # 执行脚本的地址\n\nREDIS_CLI=/usr/local/bin/redis-cli # 客户端执行脚本的地址\n\nPIDFILE=/var/run/redis.pid # 进程 id 文件地址\n\nCONF="/usr/local/src/redis-3.0.2/redis.conf" #配置文件地址\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("2）设置权限")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chmod 755 /etc/init.d/redis\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3）启动测试")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/etc/init.d/redis start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动成功会提示如下信息：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Starting Redis server...\n\nRedis is running...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("4）设置开机自启动")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chkconfig --add /etc/init.d/redis\nchkconfig redis on\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);